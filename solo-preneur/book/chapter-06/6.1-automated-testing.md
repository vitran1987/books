# CHƯƠNG 6: ĐẢM BẢO CHẤT LƯỢNG VÀ BẢO MẬT

## 6.1 Chiến Lược Kiểm Thử Tự Động: Khi Robot Trở Thành Đồng Minh Đáng Tin Cậy Nhất

Màn hình điện thoại hiển thị thông báo khẩn cấp lúc 2 giờ sáng, đánh thức Lan từ giấc ngủ. Một phụ huynh đang rất tức giận vì hệ thống AI gia sư của cô đã cho con họ một bài giải toán hoàn toàn sai, dẫn đến việc em học sinh lớp năm nộp bài kiểm tra với đáp án sai lệch nghiêm trọng. Phép tính đơn giản "125 × 8" đáng lẽ phải cho kết quả 1000, nhưng AI đã gợi ý đáp án là 1250 và giải thích một cách tự tin dường như hoàn toàn hợp lý. Điều tồi tệ hơn là khi Lan kiểm tra lại hệ thống, cô phát hiện ra rằng lỗi này không phải là trường hợp đơn lẻ - có hàng chục bài toán khác cũng bị tính sai trong tuần vừa qua, ảnh hưởng đến hơn ba trăm học sinh. Đêm đó, Lan đã mất ngủ không phải vì lo lắng về việc mất khách hàng, mà vì nhận ra một sự thật đáng sợ: cô đã phát hành sản phẩm giáo dục mà không có một hệ thống kiểm thử nghiêm ngặt. Cô đã tin tưởng mù quáng vào AI mà quên mất rằng ngay cả công nghệ tiên tiến nhất cũng cần được kiểm tra, xác minh và giám sát liên tục.

Sáng hôm sau, sau khi xin lỗi từng phụ huynh và hoàn tiền cho những gia đình bị ảnh hưởng, Lan đã quyết định xây dựng một hệ thống kiểm thử tự động toàn diện. Quyết định này không chỉ thay đổi cách cô phát triển sản phẩm mà còn biến nền tảng của cô thành một trong những ứng dụng giáo dục đáng tin cậy nhất trên thị trường Việt Nam. Trong vòng sáu tháng tiếp theo, Lan đã triển khai một chiến lược kiểm thử nhiều lớp, kết hợp sức mạnh của AI để tạo test case với sự giám sát nghiêm ngặt của con người. Kết quả là đáng kinh ngạc: tỷ lệ lỗi trong nội dung giáo dục giảm từ năm phần trăm xuống còn dưới 0.1 phần trăm, thời gian phát hiện và sửa lỗi giảm từ vài ngày xuống còn vài giờ, và quan trọng nhất là niềm tin từ phụ huynh được khôi phục và tăng lên gấp bội. Hành trình của Lan từ một cuộc khủng hoảng về chất lượng đến việc xây dựng một hệ thống kiểm thử đáng tin cậy đã dạy cô một bài học quý giá: trong lĩnh vực giáo dục, nơi mà mỗi sai lầm có thể ảnh hưởng trực tiếp đến việc học của trẻ em, kiểm thử không phải là một lựa chọn mà là một trách nhiệm đạo đức không thể bỏ qua.

### Kim Tự Tháp Kiểm Thử: Nền Tảng Của Chất Lượng Vững Chắc

Khi Lan bắt đầu nghiên cứu về kiểm thử phần mềm, cô nhanh chóng nhận ra rằng không phải tất cả các loại kiểm thử đều được tạo ra như nhau. Có một mô hình được cộng đồng kỹ sư phần mềm toàn cầu sử dụng rộng rãi gọi là "kim tự tháp kiểm thử" - một khung tư duy giúp phân bổ nỗ lực kiểm thử một cách hiệu quả nhất. Mô hình này không phải là phát minh mới mà đã được Mike Cohn đề xuất từ năm 2009 trong cuốn sách "Succeeding with Agile" và được các tập đoàn công nghệ như Google, Facebook và Netflix áp dụng thành công. Kim tự tháp kiểm thử gợi ý rằng phần lớn nỗ lực kiểm thử nên tập trung vào các kiểm thử đơn vị ở tầng dưới cùng, một lượng vừa phải cho kiểm thử tích hợp ở tầng giữa, và chỉ một phần nhỏ cho kiểm thử đầu cuối ở tầng trên. Tỷ lệ lý tưởng thường được đề xuất là bảy mươi phần trăm kiểm thử đơn vị, hai mươi phần trăm kiểm thử tích hợp, và mười phần trăm kiểm thử đầu cuối.

Lan đã áp dụng mô hình này vào nền tảng giáo dục của mình một cách có hệ thống. Tầng dưới cùng của kim tự tháp là kiểm thử đơn vị - những kiểm thử nhỏ, nhanh, tập trung vào từng hàm hoặc phương thức riêng lẻ trong mã nguồn. Đối với nền tảng AI gia sư của Lan, điều này có nghĩa là kiểm tra từng chức năng cơ bản như phân tích cú pháp của câu hỏi toán học, chuyển đổi định dạng số, tính toán các phép toán cơ bản, và xác thực dữ liệu đầu vào. Mỗi hàm được kiểm thử độc lập với hàng chục hoặc hàng trăm trường hợp khác nhau, đảm bảo rằng nó hoạt động chính xác trong mọi tình huống có thể. Ví dụ, hàm tính toán phép nhân được kiểm thử với các số nguyên dương, số nguyên âm, số thập phân, số không, số rất lớn và số rất nhỏ. Lợi ích lớn nhất của kiểm thử đơn vị là tốc độ và độ tin cậy: một bộ kiểm thử đơn vị hoàn chỉnh có thể chạy trong vài giây hoặc vài phút, cho phép nhà phát triển nhận phản hồi tức thì về chất lượng mã nguồn.

Theo nghiên cứu từ Google Testing Blog được công bố năm 2015, Google duy trì hơn hai tỷ kiểm thử đơn vị trong toàn bộ cơ sở mã nguồn của họ, và những kiểm thử này chạy liên tục mỗi khi có thay đổi mã nguồn mới. Nhờ vào việc đầu tư mạnh vào kiểm thử đơn vị, Google đã giảm được tám mươi phần trăm số lỗi trong sản phẩm so với giai đoạn trước khi áp dụng chiến lược này. Lan đã học hỏi từ kinh nghiệm này và xây dựng hơn năm nghìn kiểm thử đơn vị cho nền tảng của mình, bao phủ hầu hết các hàm quan trọng trong hệ thống. Mỗi lần cô hoặc bất kỳ nhà phát triển nào trong nhóm thêm tính năng mới hoặc sửa lỗi, tất cả năm nghìn kiểm thử này đều được chạy tự động để đảm bảo rằng các thay đổi mới không làm hỏng những chức năng đã hoạt động tốt trước đó.

Tầng giữa của kim tự tháp là kiểm thử tích hợp, nơi các thành phần khác nhau của hệ thống được kiểm tra cùng nhau để đảm bảo chúng hoạt động hài hòa. Trong nền tảng của Lan, điều này bao gồm việc kiểm tra luồng dữ liệu từ khi học sinh nhập câu hỏi, hệ thống gửi yêu cầu đến mô hình AI, mô hình xử lý và trả về câu trả lời, hệ thống xác thực câu trả lời, và cuối cùng hiển thị kết quả cho học sinh. Kiểm thử tích hợp phức tạp hơn và chạy chậm hơn kiểm thử đơn vị vì chúng liên quan đến nhiều thành phần và có thể cần truy cập cơ sở dữ liệu thật hoặc gọi API bên ngoài. Tuy nhiên, chúng vô cùng quan trọng vì nhiều lỗi chỉ xuất hiện khi các thành phần tương tác với nhau, không phải khi chúng hoạt động riêng lẻ. Lan đã xây dựng khoảng một nghìn kiểm thử tích hợp, tập trung vào các kịch bản quan trọng nhất như xử lý các loại câu hỏi toán học khác nhau, quản lý phiên học của học sinh, và tích hợp với các dịch vụ thanh toán.

Tầng trên cùng của kim tự tháp là kiểm thử đầu cuối, còn được gọi là kiểm thử giao diện người dùng hoặc kiểm thử hệ thống. Đây là những kiểm thử mô phỏng hành vi thực tế của người dùng cuối, từ việc đăng nhập vào ứng dụng, điều hướng qua các màn hình, nhập dữ liệu vào các biểu mẫu, cho đến việc xác minh kết quả hiển thị trên giao diện. Kiểm thử đầu cuối là loại kiểm thử chậm nhất, tốn kém nhất về tài nguyên, và dễ bị lỗi nhất vì chúng phụ thuộc vào nhiều yếu tố như tốc độ mạng, hiệu năng máy chủ và thậm chí cả chi tiết giao diện nhỏ nhất. Tuy nhiên, chúng cũng quan trọng vì chúng kiểm tra trải nghiệm thực tế mà người dùng sẽ có. Lan đã tạo ra khoảng ba trăm kiểm thử đầu cuối, bao gồm các kịch bản như học sinh làm bài tập toán, phụ huynh xem báo cáo tiến độ, và giáo viên tạo nội dung mới.

Việc tuân theo kim tự tháp kiểm thử đã mang lại lợi ích to lớn cho Lan. Trước hết, chi phí bảo trì giảm đáng kể vì phần lớn lỗi được phát hiện sớm ở cấp độ kiểm thử đơn vị, nơi chúng rẻ và dễ sửa nhất. Theo nghiên cứu từ IBM System Sciences Institute được công bố năm 2002 và vẫn được trích dẫn rộng rãi, chi phí để sửa một lỗi tăng lên theo cấp số nhân qua mỗi giai đoạn phát triển: một lỗi phát hiện trong giai đoạn thiết kế tốn khoảng một đô la để sửa, nhưng nếu cùng lỗi đó chỉ được phát hiện sau khi sản phẩm ra mắt, nó có thể tốn hơn một trăm đô la hoặc thậm chí một nghìn đô la để sửa chữa, tính cả chi phí hỗ trợ khách hàng, mất uy tín và thời gian ngừng hoạt động. Bằng cách có một nền tảng vững chắc gồm năm nghìn kiểm thử đơn vị chạy trong vài phút, Lan có thể phát hiện phần lớn các vấn đề ngay lập tức sau khi chúng được giới thiệu, trước khi chúng lan rộng sang các phần khác của hệ thống.

Thứ hai, tốc độ phát triển tăng lên một cách nghịch lý. Nhiều nhà phát triển nghĩ rằng viết kiểm thử sẽ làm chậm quá trình phát triển, nhưng thực tế lại ngược lại khi dự án trưởng thành. Trong những tuần đầu, việc viết kiểm thử có thể khiến tiến độ chậm lại hai mươi hoặc ba mươi phần trăm vì mỗi tính năng mới cần cả mã sản xuất và mã kiểm thử. Nhưng sau vài tháng, khi hệ thống trở nên phức tạp hơn, việc có kiểm thử tự động cho phép nhóm của Lan thêm tính năng mới và tái cấu trúc mã nguồn cũ một cách tự tin, biết rằng bất kỳ lỗi nào cũng sẽ được phát hiện ngay lập tức. Không còn những ngày dài kiểm thử thủ công từng tính năng sau mỗi thay đổi. Nghiên cứu từ Microsoft Research năm 2008 đã so sánh các nhóm phát triển có và không có kiểm thử tự động, phát hiện ra rằng sau sáu tháng, các nhóm có kiểm thử tự động đã nhanh hơn ba mươi phần trăm và có ít lỗi hơn bốn mươi phần trăm trong sản phẩm cuối cùng.

Thứ ba, niềm tin và tinh thần của đội ngũ được cải thiện đáng kể. Trước khi có hệ thống kiểm thử tự động, mỗi lần triển khai phiên bản mới đều là một trải nghiệm căng thẳng với lo lắng về việc có thể đã phá vỡ điều gì đó quan trọng. Lan và nhóm của cô thường phải thức khuya trong đêm triển khai, sẵn sàng khắc phục sự cố nếu có vấn đề xảy ra. Nhưng sau khi xây dựng kim tự tháp kiểm thử hoàn chỉnh, việc triển khai trở thành một quy trình nhàm chán và có thể dự đoán được. Nếu tất cả kiểm thử đều vượt qua, họ có thể tự tin triển khai bất kỳ lúc nào trong ngày mà không lo lắng. Điều này đã cho phép Lan chuyển từ việc triển khai một lần mỗi tháng sang triển khai vài lần mỗi tuần, cải thiện tốc độ phản hồi với phản hồi từ người dùng và yêu cầu thị trường.

### Tạo Kiểm Thử Với Sự Hỗ Trợ Của AI: Khi Máy Móc Giúp Kiểm Tra Chính Nó

Một trong những phát hiện lớn nhất của Lan trong hành trình xây dựng hệ thống kiểm thử là nhận ra rằng chính AI cũng có thể được sử dụng để tạo ra các kiểm thử cho hệ thống AI. Điều này nghe có vẻ như một nghịch lý - làm sao có thể tin tưởng AI để kiểm tra AI? Nhưng khi được sử dụng đúng cách, các công cụ hỗ trợ mã nguồn bằng AI như GitHub Copilot, Amazon CodeWhisperer và ChatGPT đã trở thành những trợ lý đắc lực trong việc tạo ra các trường hợp kiểm thử toàn diện mà nếu viết thủ công sẽ tốn hàng trăm giờ.

Lan bắt đầu thử nghiệm với GitHub Copilot vào cuối năm 2023, khi công cụ này đã trở nên đủ tinh vi để hiểu ngữ cảnh mã nguồn phức tạp. Cô phát hiện ra rằng khi viết một hàm xử lý toán học mới, chỉ cần viết một hoặc hai kiểm thử mẫu, Copilot có thể gợi ý hàng chục kiểm thử bổ sung bao phủ nhiều trường hợp khác nhau mà cô có thể đã bỏ lỡ. Ví dụ, khi viết hàm xử lý phân số, Lan đã tạo kiểm thử cho trường hợp đơn giản như một phần hai cộng một phần ba. Copilot ngay lập tức đề xuất các kiểm thử cho phân số âm, phân số với mẫu số bằng không, phân số rút gọn, phân số hỗn hợp, và thậm chí cả các trường hợp đặc biệt như phân số với tử số và mẫu số đều bằng không. Khả năng này của AI không phải là phép màu mà đến từ việc Copilot đã được huấn luyện trên hàng tỷ dòng mã nguồn mã nguồn mở từ GitHub, bao gồm vô số các bộ kiểm thử được viết bởi các kỹ sư giỏi nhất thế giới.

Theo báo cáo từ GitHub được công bố vào tháng sáu năm 2023, các nhà phát triển sử dụng Copilot đã viết mã nhanh hơn năm mươi lăm phần trăm so với những người không sử dụng, và phần lớn sự gia tăng năng suất này đến từ việc viết kiểm thử và mã nguồn boilerplate - những phần lặp đi lặp lại mà AI xử lý rất tốt. Đặc biệt quan trọng là nghiên cứu cũng cho thấy chất lượng mã không bị giảm sút khi sử dụng Copilot, miễn là nhà phát triển vẫn xem xét và hiểu mã được tạo ra thay vì chấp nhận mù quáng mọi gợi ý. Lan đã áp dụng quy trình làm việc này một cách nghiêm ngặt: cô sử dụng Copilot để tạo ra bản nháp các kiểm thử, sau đó dành thời gian xem xét kỹ lưỡng từng kiểm thử để đảm bảo chúng thực sự có ý nghĩa và bao phủ các trường hợp quan trọng.

Một ứng dụng đặc biệt hiệu quả của AI trong việc tạo kiểm thử là phát hiện các trường hợp biên và các tình huống bất thường mà con người dễ bỏ qua. Khi Lan phát triển tính năng cho phép học sinh nhập phương trình đại số, cô đã nghĩ đến các trường hợp thông thường như phương trình bậc nhất với một ẩn, phương trình bậc hai, và hệ phương trình. Nhưng khi cô yêu cầu ChatGPT tạo danh sách các trường hợp kiểm thử cho tính năng này, AI đã đề xuất hàng chục tình huống bổ sung mà cô chưa từng nghĩ đến: phương trình với vô số nghiệm, phương trình vô nghiệm, phương trình với hệ số là phân số hoặc số thập phân, phương trình có dấu ngoặc lồng nhau nhiều lớp, phương trình với khoảng trắng không chuẩn, và thậm chí cả những đầu vào không hợp lệ như phương trình thiếu dấu bằng hoặc chứa ký tự đặc biệt không mong muốn. Việc kiểm thử tất cả các trường hợp này đã giúp Lan phát hiện và sửa nhiều lỗi tiềm ẩn trước khi chúng gây ra vấn đề cho người dùng thực tế.

Nhưng Lan cũng học được rằng không nên tin tưởng hoàn toàn vào AI mà không có sự giám sát của con người. Có những lúc Copilot đề xuất các kiểm thử trông có vẻ hợp lý nhưng thực ra lại kiểm tra sai điều hoặc có các giả định không chính xác. Ví dụ, trong một trường hợp, Copilot đã tạo kiểm thử cho hàm tính diện tích hình tròn nhưng sử dụng giá trị pi không chính xác với chỉ hai chữ số thập phân, dẫn đến kiểm thử chấp nhận kết quả sai. Trong trường hợp khác, AI đề xuất kiểm thử cho tính năng xử lý tiếng Việt nhưng sử dụng các ví dụ không có dấu hoặc có dấu sai, điều này hoàn toàn không phù hợp với mục tiêu giáo dục chính xác của nền tảng. Những kinh nghiệm này dạy Lan một nguyên tắc quan trọng: AI là một công cụ tuyệt vời để tăng tốc quá trình tạo kiểm thử, nhưng sự hiểu biết chuyên môn của con người vẫn là không thể thiếu để đảm bảo chất lượng và độ chính xác cuối cùng.

Lan cũng phát triển một quy trình làm việc hiệu quả kết hợp sức mạnh của AI với sự giám sát của con người. Trước hết, khi phát triển tính năng mới, cô sẽ viết một tài liệu ngắn mô tả chức năng, các trường hợp sử dụng dự kiến, và các ràng buộc quan trọng. Sau đó, cô sẽ sử dụng ChatGPT để tạo danh sách toàn diện các trường hợp kiểm thử cần bao phủ, bao gồm cả các trường hợp thành công và thất bại, trường hợp thông thường và trường hợp biên. Tiếp theo, cô sẽ xem xét danh sách này, loại bỏ các trường hợp không liên quan, thêm các trường hợp đặc biệt cho ngữ cảnh giáo dục Việt Nam, và ưu tiên các trường hợp theo mức độ quan trọng. Cuối cùng, cô sẽ sử dụng Copilot để viết mã kiểm thử thực tế cho từng trường hợp, nhưng luôn xem xét kỹ lưỡng mã được tạo ra để đảm bảo nó thực sự kiểm tra đúng điều cần kiểm tra với độ chính xác cao.

Quy trình này đã giúp Lan tăng tốc độ tạo kiểm thử lên gấp ba lần so với việc viết thủ công hoàn toàn, đồng thời vẫn duy trì chất lượng cao và độ bao phủ toàn diện. Trong một tháng điển hình, cô có thể tạo ra từ ba trăm đến năm trăm kiểm thử mới cho các tính năng đang phát triển, một con số mà trước đây sẽ đòi hỏi một nhóm vài người làm việc toàn thời gian. Chi phí sử dụng các dịch vụ AI này cũng rất hợp lý: gói GitHub Copilot có giá mười đô la mỗi tháng, và việc sử dụng ChatGPT API để tạo danh sách kiểm thử thường chỉ tốn vài đô la mỗi tháng. So với chi phí thuê một kỹ sư kiểm thử chuyên nghiệp với mức lương hàng chục triệu đồng mỗi tháng, đây là một khoản đầu tư cực kỳ hiệu quả cho một founder solo.

### Kiểm Thử Nội Dung Giáo Dục: Khi Độ Chính Xác Là Tính Mạng

Nếu có một lĩnh vực mà kiểm thử là vô cùng quan trọng và không thể thỏa hiệp, đó chính là nội dung giáo dục. Một lỗi trong giao diện người dùng có thể gây khó chịu, một lỗi trong hệ thống thanh toán có thể gây bất tiện, nhưng một lỗi trong nội dung toán học hoặc ngữ văn có thể dạy sai cho hàng nghìn học sinh và làm hỏng nền tảng kiến thức của chúng. Sau vụ việc đau đớn với phép nhân bị tính sai, Lan đã xây dựng một hệ thống kiểm thử nội dung giáo dục nhiều lớp, kết hợp kiểm tra tự động với xác minh của con người, và sử dụng nhiều nguồn dữ liệu đáng tin cậy để so sánh chéo.

Lớp đầu tiên là kiểm thử độ chính xác toán học tuyệt đối. Đối với mọi phép tính mà AI thực hiện, Lan đã triển khai một hệ thống xác minh sử dụng nhiều phương pháp tính toán độc lập. Khi AI tính toán một phép nhân, hệ thống cũng sử dụng thư viện toán học chuẩn của Python để tính toán cùng một phép toán, sau đó so sánh hai kết quả. Nếu có bất kỳ sự khác biệt nào, hệ thống sẽ đánh dấu kết quả để xem xét thủ công. Lan cũng tích hợp với WolframAlpha API, một công cụ tính toán được tin tưởng bởi hàng triệu sinh viên và giáo viên trên toàn thế giới, để xác minh các phép tính phức tạp hơn như vi phân, tích phân và giải phương trình. Theo nghiên cứu từ Wolfram Research, WolframAlpha xử lý hơn ba tỷ truy vấn mỗi năm với độ chính xác vượt quá chín mươi chín phẩy chín phần trăm trong các phép toán cơ bản và cao cấp.

Đối với các bài toán có nhiều bước giải, Lan không chỉ kiểm tra kết quả cuối cùng mà còn xác minh từng bước trung gian. AI được yêu cầu phải giải thích từng bước trong quá trình giải toán, và một hệ thống kiểm tra độc lập sẽ xác minh logic của từng bước đó. Ví dụ, khi giải phương trình bậc hai, AI phải thực hiện các bước rõ ràng như xác định hệ số, tính delta, áp dụng công thức nghiệm, và đơn giản hóa kết quả. Mỗi bước này được kiểm tra riêng lẻ để đảm bảo không có lỗi logic nào lẻn vào. Cách tiếp cận này đã giúp Lan phát hiện ra nhiều lỗi tinh vi mà việc chỉ kiểm tra kết quả cuối cùng sẽ bỏ lỡ. Trong một trường hợp, AI đưa ra đáp án cuối cùng chính xác nhưng bước giải thích trung gian có lỗi toán học nghiêm trọng, điều này có thể gây nhầm lẫn cho học sinh nếu chúng cố gắng học theo cách giải đó.

Đối với ngôn ngữ tiếng Việt, thách thức lớn nhất là đảm bảo ngữ pháp chính xác, dấu thanh đúng, và giọng điệu phù hợp với lứa tuổi học sinh. Lan đã tích hợp nhiều công cụ kiểm tra tiếng Việt bao gồm cả các thư viện mã nguồn mở như VnCoreNLP và các API thương mại chuyên về xử lý ngôn ngữ tiếng Việt. Mỗi đoạn văn bản do AI tạo ra đều phải vượt qua một loạt các kiểm tra: không có lỗi chính tả, dấu thanh đúng cho tất cả các từ, cấu trúc câu phù hợp với chuẩn ngữ pháp tiếng Việt, và từ vựng phù hợp với trình độ lớp học mục tiêu. Lan cũng xây dựng một danh sách đen các từ ngữ không phù hợp với giáo dục như tiếng lóng, từ ngữ thô tục, hoặc nội dung nhạy cảm, và hệ thống tự động từ chối bất kỳ nội dung nào chứa các từ này.

Một khía cạnh đặc biệt quan trọng khác là đảm bảo tính phù hợp về mặt văn hóa và giáo dục. Nội dung được tạo bởi các mô hình AI lớn được huấn luyện chủ yếu trên dữ liệu tiếng Anh và phương Tây có thể chứa các ví dụ, tình huống hoặc giá trị không phù hợp với bối cảnh Việt Nam. Lan đã xây dựng một bộ quy tắc kiểm tra để đảm bảo mọi nội dung đều phù hợp với văn hóa và hệ thống giáo dục Việt Nam. Ví dụ, khi tạo bài toán ứng dụng về tiền tệ, hệ thống phải sử dụng đơn vị đồng Việt Nam chứ không phải đô la Mỹ, và các con số phải thực tế theo mức giá ở Việt Nam. Khi đưa ra ví dụ về lịch sử hoặc địa lý, nội dung phải ưu tiên các sự kiện và địa danh Việt Nam trước khi đề cập đến quốc tế. Các bài toán về đo lường phải sử dụng hệ mét chứ không phải hệ đo lường Anh. Những chi tiết nhỏ này có thể dễ bị bỏ qua nhưng lại rất quan trọng để tạo ra trải nghiệm học tập gần gũi và phù hợp với học sinh Việt Nam.

Lan cũng thiết lập một quy trình xem xét của con người cho các loại nội dung quan trọng nhất. Mặc dù kiểm thử tự động có thể bắt được nhiều lỗi, nhưng vẫn có những vấn đề tinh vi cần sự đánh giá của giáo viên thực sự. Cô đã hợp tác với ba giáo viên toán và ngữ văn có nhiều năm kinh nghiệm giảng dạy ở các trường tiểu học và trung học cơ sở tại Hà Nội và Thành phố Hồ Chí Minh. Mỗi tuần, họ dành vài giờ để xem xét mẫu ngẫu nhiên khoảng một trăm câu hỏi và lời giải do AI tạo ra, đánh giá không chỉ về độ chính xác mà còn về chất lượng sư phạm, mức độ phù hợp với chương trình học, và khả năng giúp học sinh hiểu bài. Phản hồi từ các giáo viên này vô cùng quý giá và đã giúp Lan cải thiện hệ thống nhiều lần. Họ đã phát hiện ra nhiều trường hợp mà câu trả lời tuy chính xác về mặt toán học nhưng cách giải thích lại quá phức tạp cho lứa tuổi học sinh, hoặc sử dụng thuật ngữ kỹ thuật mà chương trình học chưa giới thiệu. Chi phí cho việc hợp tác này khoảng năm triệu đồng mỗi tháng - một khoản đầu tư nhỏ nhưng mang lại giá trị to lớn trong việc đảm bảo chất lượng nội dung.

### Kiểm Thử Liên Tục: Tích Hợp Chất Lượng Vào Từng Bước Phát Triển

Điểm mấu chốt để hệ thống kiểm thử thực sự phát huy tác dụng không phải ở việc có bao nhiêu kiểm thử, mà ở việc chúng được chạy bao lâu một lần và có tự động không. Lan đã học được bài học quan trọng này sau những tuần đầu tiên cố gắng chạy kiểm thử thủ công. Ban đầu, cô có khoảng một nghìn kiểm thử nhưng việc chạy chúng đòi hỏi phải nhớ thực hiện nhiều lệnh khác nhau, mất khoảng mười lăm phút mỗi lần, và kết quả không được lưu lại một cách có hệ thống. Hệ quả là cô thường quên chạy kiểm thử hoặc chỉ chạy một phần nhỏ, dẫn đến việc nhiều lỗi lẻn vào sản phẩm mà không bị phát hiện. Tình huống chỉ thực sự thay đổi khi cô triển khai quy trình tích hợp liên tục và triển khai liên tục, thường được gọi tắt là CI/CD.

CI/CD là một tập hợp các thực hành trong kỹ nghệ phần mềm hiện đại, nơi mọi thay đổi mã nguồn đều tự động được xây dựng, kiểm thử và triển khai mà không cần can thiệp thủ công. Khái niệm này đã được các công ty công nghệ hàng đầu như Amazon, Google và Netflix áp dụng từ đầu những năm 2000, và hiện nay đã trở thành tiêu chuẩn trong ngành. Theo báo cáo State of DevOps năm 2023 từ Google Cloud, các tổ chức áp dụng CI/CD triển khai mã mới nhanh hơn hai trăm lần, có tỷ lệ thất bại thấp hơn ba lần, và phục hồi từ sự cố nhanh hơn hai nghìn lần so với các tổ chức không áp dụng thực hành này. Lan đã quyết định đầu tư thời gian để thiết lập hệ thống CI/CD cho dù là một founder solo, và quyết định này đã trả lại gấp nhiều lần công sức bỏ ra.

Cô bắt đầu bằng việc tích hợp với GitHub Actions, một dịch vụ CI/CD miễn phí cho các dự án mã nguồn mở và có giá rất hợp lý cho các dự án riêng tư. Quy trình làm việc mà Lan thiết lập khá đơn giản nhưng hiệu quả: mỗi khi cô đẩy mã nguồn mới lên GitHub, một loạt các bước tự động sẽ được kích hoạt. Đầu tiên, hệ thống sẽ tải xuống toàn bộ mã nguồn và cài đặt tất cả các thư viện cần thiết. Tiếp theo, nó sẽ chạy công cụ phân tích tĩnh để kiểm tra các lỗi cú pháp, các vấn đề về phong cách mã nguồn, và các lỗ hổng bảo mật tiềm ẩn. Sau đó, toàn bộ bộ kiểm thử đơn vị, kiểm thử tích hợp và một phần kiểm thử đầu cuối sẽ được chạy trên một máy chủ ảo. Nếu bất kỳ kiểm thử nào thất bại, toàn bộ quy trình sẽ dừng lại và Lan sẽ nhận được thông báo qua email và Slack về lỗi cụ thể. Chỉ khi tất cả kiểm thử đều vượt qua, mã nguồn mới mới được phép hợp nhất vào nhánh chính và triển khai lên môi trường sản xuất.

Điều tuyệt vời nhất của hệ thống này là nó hoàn toàn tự động và chạy cho mọi thay đổi, dù lớn hay nhỏ. Ngay cả khi Lan chỉ sửa một dòng mã để thay đổi một thông báo lỗi nhỏ, toàn bộ năm nghìn kiểm thử đơn vị cùng một nghìn kiểm thử tích hợp vẫn sẽ chạy để đảm bảo rằng thay đổi nhỏ đó không vô tình phá vỡ điều gì khác. Mặc dù việc chạy tất cả kiểm thử này mất khoảng mười hai phút, Lan không phải ngồi đợi vì quy trình chạy trên đám mây và cô có thể tiếp tục làm việc khác trong khi chờ đợi. Hơn nữa, chi phí cho việc này rất hợp lý: GitHub Actions cung cấp hai nghìn phút miễn phí mỗi tháng cho các tài khoản cá nhân, và ngay cả khi Lan cần mua thêm, giá chỉ khoảng tám đô la cho mỗi một nghìn phút bổ sung. Trong một tháng điển hình với khoảng một trăm lần đẩy mã, cô thường chỉ sử dụng khoảng hai nghìn phút, tức là hoàn toàn miễn phí.

Kết quả của việc triển khai CI/CD đã vượt xa mong đợi của Lan. Trong sáu tháng đầu tiên sau khi áp dụng, số lỗi trong môi trường sản xuất đã giảm tám mươi lăm phần trăm so với giai đoạn trước đó. Đặc biệt quan trọng là thời gian từ khi phát hiện lỗi đến khi sửa và triển khai bản vá đã giảm từ trung bình ba ngày xuống còn chưa đầy sáu giờ. Điều này có nghĩa là ngay cả khi có lỗi lọt qua kiểm thử và ảnh hưởng đến người dùng, cô có thể sửa chữa và phát hành bản cập nhật gần như ngay lập tức, giảm thiểu tác động đến trải nghiệm học tập của học sinh. Niềm tin của phụ huynh cũng được cải thiện đáng kể khi họ thấy rằng mọi vấn đề được báo cáo đều được giải quyết nhanh chóng và chuyên nghiệp.

Lan cũng thêm kiểm thử hiệu năng vào quy trình CI/CD của mình để đảm bảo rằng các thay đổi mã nguồn không làm chậm ứng dụng. Thời gian phản hồi là cực kỳ quan trọng trong giáo dục trực tuyến - nghiên cứu từ Google đã chỉ ra rằng mỗi giây trễ trong thời gian tải trang có thể làm giảm hai mươi phần trăm sự hài lòng của người dùng và tăng tỷ lệ rời bỏ trang. Đối với học sinh, sự chậm trễ có thể làm gián đoạn quá trình tư duy và giảm hiệu quả học tập. Hệ thống CI/CD của Lan bao gồm các kiểm thử đo lường thời gian phản hồi của các API quan trọng, thời gian tải trang, và thời gian xử lý của mô hình AI. Nếu bất kỳ thay đổi mã nguồn nào làm tăng thời gian phản hồi quá hai mươi phần trăm so với baseline, hệ thống sẽ tự động từ chối và yêu cầu tối ưu hóa trước khi có thể triển khai.

Chi phí vận hành toàn bộ hệ thống kiểm thử tự động này đáng ngạc nhiên là thấp. Ngoài chi phí GitHub Actions đã đề cập, Lan chi thêm khoảng mười đô la mỗi tháng cho việc lưu trữ báo cáo kiểm thử và số liệu trên AWS S3, năm triệu đồng mỗi tháng cho ba giáo viên xem xét nội dung, và khoảng ba đô la mỗi tháng cho các API xác minh toán học từ WolframAlpha. Tổng cộng, toàn bộ hệ thống kiểm thử chất lượng toàn diện tốn khoảng sáu triệu đồng mỗi tháng - một con số rẻ đến không thể tin được so với giá trị mà nó mang lại. Trước khi có hệ thống này, mỗi sự cố chất lượng lớn có thể khiến Lan mất hàng chục triệu đồng do phải hoàn tiền cho khách hàng, mất uy tín dẫn đến giảm doanh thu, và thời gian xử lý khủng hoảng. Giờ đây, với khoản đầu tư nhỏ này, cô có thể ngủ ngon hàng đêm biết rằng chất lượng sản phẩm được bảo vệ bởi nhiều lớp phòng thủ vững chắc.

Nhìn lại hành trình từ cuộc khủng hoảng chất lượng ban đầu đến hệ thống kiểm thử toàn diện hiện tại, Lan nhận ra rằng đầu tư vào kiểm thử tự động là một trong những quyết định quan trọng nhất mà cô đã đưa ra. Nó không chỉ cải thiện chất lượng sản phẩm mà còn làm tăng tốc độ phát triển, giảm căng thẳng, và cho phép cô tự tin mở rộng quy mô kinh doanh. Khi số lượng học sinh sử dụng nền tảng tăng từ vài trăm lên vài nghìn, hệ thống kiểm thử đã đảm bảo rằng chất lượng không bị giảm sút mà ngày càng được cải thiện. Mỗi lỗi được phát hiện và sửa chữa đều trở thành một kiểm thử mới trong bộ kiểm thử, đảm bảo rằng lỗi đó sẽ không bao giờ tái diễn. Đây chính là sức mạnh thực sự của kiểm thử tự động: nó không chỉ bảo vệ hiện tại mà còn xây dựng nền tảng vững chắc cho tương lai, biến mỗi thách thức thành một bài học quý giá và mỗi lỗi thành một cơ hội để hệ thống trở nên mạnh mẽ hơn.

